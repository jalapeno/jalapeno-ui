{"ast":null,"code":"var _jsxFileName = \"/Users/brucemcdougall/go/jalapeno-github/jalapeno-ui/src/components/NetworkGraph.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport cytoscape from 'cytoscape';\nimport cola from 'cytoscape-cola';\nimport { apiUrl } from '../config';\nimport '../styles/NetworkGraph.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = {\n  igp_node: '#CC4A04',\n  // Cayenne orange for IGP nodes\n  bgp_node: '#1E88E5',\n  // Blue for BGP nodes\n  prefix: '#002921',\n  // Dark green for all prefix types\n  text: '#000',\n  // Black text\n  edge: '#1a365d' // Blue edges\n};\ncytoscape.use(cola);\nconst NetworkGraph = ({\n  collection\n}) => {\n  _s();\n  const cyRef = useRef(null);\n  const [graphData, setGraphData] = useState(null);\n  const isPrefix = type => {\n    return type === 'ls_prefix' || type === 'bgp_prefix';\n  };\n\n  // Legend component definition\n  const Legend = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"graph-legend\",\n    style: {\n      position: 'absolute',\n      top: '10px',\n      right: '10px',\n      background: 'white',\n      padding: '10px',\n      borderRadius: '5px',\n      boxShadow: '0 0 10px rgba(0,0,0,0.1)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        margin: '0 0 10px 0'\n      },\n      children: \"Legend\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '5px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: '20px',\n            height: '20px',\n            backgroundColor: COLORS.igp_node,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"IGP Nodes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: '20px',\n            height: '20px',\n            backgroundColor: COLORS.bgp_node,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"BGP Nodes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: '20px',\n            height: '20px',\n            backgroundColor: COLORS.prefix,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Prefixes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n  const transformDataToCytoscape = data => {\n    if (!(data !== null && data !== void 0 && data.edges) || !(data !== null && data !== void 0 && data.vertices)) {\n      console.warn('Missing edges or vertices in data');\n      return [];\n    }\n    const elements = [];\n\n    // Add vertices as nodes\n    Object.entries(data.vertices).forEach(([id, vertex]) => {\n      const nodeType = id.split('/')[0]; // e.g., 'igp_node', 'ls_prefix', 'bgp_node'\n      elements.push({\n        group: 'nodes',\n        data: {\n          id: id,\n          label: vertex.name || id.split('/')[1],\n          type: nodeType,\n          vertexData: vertex\n        }\n      });\n    });\n\n    // Add edges\n    const processedEdges = new Set();\n    data.edges.forEach(edge => {\n      if (edge._from && edge._to) {\n        const edgeId = `${edge._from}-${edge._to}`;\n        if (!processedEdges.has(edgeId)) {\n          processedEdges.add(edgeId);\n          elements.push({\n            group: 'edges',\n            data: {\n              id: edgeId,\n              source: edge._from,\n              target: edge._to\n            }\n          });\n        }\n      }\n    });\n    console.log('Transformed elements:', {\n      total: elements.length,\n      nodes: elements.filter(e => e.group === 'nodes').length,\n      edges: elements.filter(e => e.group === 'edges').length\n    });\n    return elements;\n  };\n  useEffect(() => {\n    console.log('Collection received:', {\n      collection,\n      type: typeof collection,\n      keys: collection ? Object.keys(collection) : 'none'\n    });\n\n    // If collection is just the name, we need to fetch the data\n    if (typeof collection === 'string') {\n      const baseUrl = process.env.REACT_APP_API_URL || '';\n      const endpoint = `${baseUrl}/api/v1/collections/${collection}/topology`;\n      console.log('Fetching topology from:', endpoint, {\n        baseUrl,\n        fullUrl: window.location.origin + endpoint\n      });\n      fetch(endpoint).then(async response => {\n        console.log('Response status:', response.status);\n        console.log('Response headers:', Object.fromEntries(response.headers));\n        const text = await response.text();\n        console.log('Raw response:', text.substring(0, 500) + '...');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}, body: ${text.substring(0, 200)}`);\n        }\n        try {\n          return JSON.parse(text);\n        } catch (e) {\n          console.error('JSON parse error:', e);\n          throw new Error(`Invalid JSON response: ${text.substring(0, 200)}`);\n        }\n      }).then(data => {\n        var _data$edges;\n        console.log('Parsed topology data:', {\n          hasData: !!data,\n          vertices: data !== null && data !== void 0 && data.vertices ? Object.keys(data.vertices).length : 0,\n          edges: (data === null || data === void 0 ? void 0 : (_data$edges = data.edges) === null || _data$edges === void 0 ? void 0 : _data$edges.length) || 0,\n          dataKeys: data ? Object.keys(data) : []\n        });\n        const elements = transformDataToCytoscape(data);\n        setGraphData(elements);\n      }).catch(error => {\n        console.error('Request failed:', {\n          message: error.message,\n          stack: error.stack,\n          endpoint,\n          baseUrl,\n          fullUrl: window.location.origin + endpoint\n        });\n      });\n    }\n  }, [collection]);\n  useEffect(() => {\n    console.log('Graph data changed:', graphData);\n    if (cyRef.current && graphData) {\n      const cy = cyRef.current;\n      console.log('Applying layout to', cy.elements().length, 'elements');\n\n      // Run layouts sequentially\n      const nonPrefixNodes = cy.nodes().filter(node => !isPrefix(node.data('type')));\n      const prefixNodes = cy.nodes().filter(node => isPrefix(node.data('type')));\n      console.log('Node counts:', {\n        total: cy.nodes().length,\n        nonPrefix: nonPrefixNodes.length,\n        prefix: prefixNodes.length\n      });\n\n      // Position non-prefix nodes in a circle\n      nonPrefixNodes.layout({\n        name: 'circle',\n        animate: false,\n        padding: 50,\n        radius: 150,\n        startAngle: 3 / 2 * Math.PI,\n        sweep: 2 * Math.PI,\n        clockwise: true\n      }).run();\n\n      // Position prefix nodes in a line\n      const width = cy.width();\n      const height = cy.height();\n      prefixNodes.forEach((node, index) => {\n        const totalPrefixes = prefixNodes.length;\n        const prefixWidth = width * 0.8;\n        const startX = width * 0.1;\n        const x = startX + prefixWidth * index / (totalPrefixes - 1 || 1);\n        node.position({\n          x: x,\n          y: height * 0.8\n        });\n      });\n\n      // Fit the viewport\n      cy.fit(undefined, 50);\n    }\n  }, [graphData]);\n  const stylesheet = [{\n    selector: 'node',\n    style: {\n      'background-color': ele => {\n        const type = ele.data('type');\n        if (isPrefix(type)) return COLORS.prefix;\n        return COLORS[type] || COLORS.igp_node;\n      },\n      'label': 'data(label)',\n      'width': 30,\n      'height': 30,\n      'color': COLORS.text,\n      'text-outline-width': 2,\n      'text-outline-color': '#fff',\n      'font-family': 'Consolas',\n      'font-size': '10px',\n      'text-wrap': 'wrap',\n      'text-max-width': '100px'\n    }\n  }, {\n    selector: 'edge',\n    style: {\n      'width': 1.5,\n      'line-color': COLORS.edge,\n      'curve-style': 'bezier',\n      'target-arrow-color': COLORS.edge,\n      'target-arrow-shape': 'triangle',\n      'arrow-scale': 0.8\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"network-graph\",\n    style: {\n      width: '100%',\n      height: '800px',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CytoscapeComponent, {\n      cy: cy => {\n        console.log('Cytoscape initialized');\n        cyRef.current = cy;\n      },\n      elements: graphData || [],\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      stylesheet: stylesheet,\n      userZoomingEnabled: true,\n      userPanningEnabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 5\n  }, this);\n};\n_s(NetworkGraph, \"E/8/QMImdjSaPUsH4myrgcssuf4=\");\n_c = NetworkGraph;\nexport default NetworkGraph;\nvar _c;\n$RefreshReg$(_c, \"NetworkGraph\");","map":{"version":3,"names":["React","useEffect","useRef","useState","CytoscapeComponent","cytoscape","cola","apiUrl","jsxDEV","_jsxDEV","COLORS","igp_node","bgp_node","prefix","text","edge","use","NetworkGraph","collection","_s","cyRef","graphData","setGraphData","isPrefix","type","Legend","className","style","position","top","right","background","padding","borderRadius","boxShadow","children","margin","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","gap","alignItems","width","height","backgroundColor","transformDataToCytoscape","data","edges","vertices","console","warn","elements","Object","entries","forEach","id","vertex","nodeType","split","push","group","label","name","vertexData","processedEdges","Set","_from","_to","edgeId","has","add","source","target","log","total","length","nodes","filter","e","keys","baseUrl","process","env","REACT_APP_API_URL","endpoint","fullUrl","window","location","origin","fetch","then","response","status","fromEntries","headers","substring","ok","Error","JSON","parse","error","_data$edges","hasData","dataKeys","catch","message","stack","current","cy","nonPrefixNodes","node","prefixNodes","nonPrefix","layout","animate","radius","startAngle","Math","PI","sweep","clockwise","run","index","totalPrefixes","prefixWidth","startX","x","y","fit","undefined","stylesheet","selector","ele","userZoomingEnabled","userPanningEnabled","_c","$RefreshReg$"],"sources":["/Users/brucemcdougall/go/jalapeno-github/jalapeno-ui/src/components/NetworkGraph.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport cytoscape from 'cytoscape';\nimport cola from 'cytoscape-cola';\nimport { apiUrl } from '../config';\nimport '../styles/NetworkGraph.css';\n\nconst COLORS = {\n  igp_node: '#CC4A04',    // Cayenne orange for IGP nodes\n  bgp_node: '#1E88E5',    // Blue for BGP nodes\n  prefix: '#002921',      // Dark green for all prefix types\n  text: '#000',           // Black text\n  edge: '#1a365d'         // Blue edges\n};\n\ncytoscape.use(cola);\n\nconst NetworkGraph = ({ collection }) => {\n  const cyRef = useRef(null);\n  const [graphData, setGraphData] = useState(null);\n\n  const isPrefix = (type) => {\n    return type === 'ls_prefix' || type === 'bgp_prefix';\n  };\n\n  // Legend component definition\n  const Legend = () => (\n    <div className=\"graph-legend\" style={{\n      position: 'absolute',\n      top: '10px',\n      right: '10px',\n      background: 'white',\n      padding: '10px',\n      borderRadius: '5px',\n      boxShadow: '0 0 10px rgba(0,0,0,0.1)'\n    }}>\n      <h3 style={{ margin: '0 0 10px 0' }}>Legend</h3>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '5px' }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n          <span style={{ \n            width: '20px', \n            height: '20px', \n            backgroundColor: COLORS.igp_node,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }}></span>\n          <span>IGP Nodes</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n          <span style={{ \n            width: '20px', \n            height: '20px', \n            backgroundColor: COLORS.bgp_node,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }}></span>\n          <span>BGP Nodes</span>\n        </div>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n          <span style={{ \n            width: '20px', \n            height: '20px', \n            backgroundColor: COLORS.prefix,\n            display: 'inline-block',\n            borderRadius: '3px'\n          }}></span>\n          <span>Prefixes</span>\n        </div>\n      </div>\n    </div>\n  );\n\n  const transformDataToCytoscape = (data) => {\n    if (!data?.edges || !data?.vertices) {\n      console.warn('Missing edges or vertices in data');\n      return [];\n    }\n\n    const elements = [];\n\n    // Add vertices as nodes\n    Object.entries(data.vertices).forEach(([id, vertex]) => {\n      const nodeType = id.split('/')[0]; // e.g., 'igp_node', 'ls_prefix', 'bgp_node'\n      elements.push({\n        group: 'nodes',\n        data: {\n          id: id,\n          label: vertex.name || id.split('/')[1],\n          type: nodeType,\n          vertexData: vertex\n        }\n      });\n    });\n\n    // Add edges\n    const processedEdges = new Set();\n    data.edges.forEach(edge => {\n      if (edge._from && edge._to) {\n        const edgeId = `${edge._from}-${edge._to}`;\n        if (!processedEdges.has(edgeId)) {\n          processedEdges.add(edgeId);\n          elements.push({\n            group: 'edges',\n            data: {\n              id: edgeId,\n              source: edge._from,\n              target: edge._to\n            }\n          });\n        }\n      }\n    });\n\n    console.log('Transformed elements:', {\n      total: elements.length,\n      nodes: elements.filter(e => e.group === 'nodes').length,\n      edges: elements.filter(e => e.group === 'edges').length\n    });\n\n    return elements;\n  };\n\n  useEffect(() => {\n    console.log('Collection received:', {\n      collection,\n      type: typeof collection,\n      keys: collection ? Object.keys(collection) : 'none'\n    });\n\n    // If collection is just the name, we need to fetch the data\n    if (typeof collection === 'string') {\n      const baseUrl = process.env.REACT_APP_API_URL || '';\n      const endpoint = `${baseUrl}/api/v1/collections/${collection}/topology`;\n      \n      console.log('Fetching topology from:', endpoint, {\n        baseUrl,\n        fullUrl: window.location.origin + endpoint\n      });\n      \n      fetch(endpoint)\n        .then(async response => {\n          console.log('Response status:', response.status);\n          console.log('Response headers:', Object.fromEntries(response.headers));\n          \n          const text = await response.text();\n          console.log('Raw response:', text.substring(0, 500) + '...');\n          \n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}, body: ${text.substring(0, 200)}`);\n          }\n          \n          try {\n            return JSON.parse(text);\n          } catch (e) {\n            console.error('JSON parse error:', e);\n            throw new Error(`Invalid JSON response: ${text.substring(0, 200)}`);\n          }\n        })\n        .then(data => {\n          console.log('Parsed topology data:', {\n            hasData: !!data,\n            vertices: data?.vertices ? Object.keys(data.vertices).length : 0,\n            edges: data?.edges?.length || 0,\n            dataKeys: data ? Object.keys(data) : []\n          });\n          const elements = transformDataToCytoscape(data);\n          setGraphData(elements);\n        })\n        .catch(error => {\n          console.error('Request failed:', {\n            message: error.message,\n            stack: error.stack,\n            endpoint,\n            baseUrl,\n            fullUrl: window.location.origin + endpoint\n          });\n        });\n    }\n  }, [collection]);\n\n  useEffect(() => {\n    console.log('Graph data changed:', graphData);\n    if (cyRef.current && graphData) {\n      const cy = cyRef.current;\n      console.log('Applying layout to', cy.elements().length, 'elements');\n      \n      // Run layouts sequentially\n      const nonPrefixNodes = cy.nodes().filter(node => !isPrefix(node.data('type')));\n      const prefixNodes = cy.nodes().filter(node => isPrefix(node.data('type')));\n      \n      console.log('Node counts:', {\n        total: cy.nodes().length,\n        nonPrefix: nonPrefixNodes.length,\n        prefix: prefixNodes.length\n      });\n\n      // Position non-prefix nodes in a circle\n      nonPrefixNodes.layout({\n        name: 'circle',\n        animate: false,\n        padding: 50,\n        radius: 150,\n        startAngle: 3/2 * Math.PI,\n        sweep: 2 * Math.PI,\n        clockwise: true\n      }).run();\n\n      // Position prefix nodes in a line\n      const width = cy.width();\n      const height = cy.height();\n      \n      prefixNodes.forEach((node, index) => {\n        const totalPrefixes = prefixNodes.length;\n        const prefixWidth = width * 0.8;\n        const startX = width * 0.1;\n        const x = startX + (prefixWidth * index / (totalPrefixes - 1 || 1));\n        \n        node.position({\n          x: x,\n          y: height * 0.8\n        });\n      });\n\n      // Fit the viewport\n      cy.fit(undefined, 50);\n    }\n  }, [graphData]);\n\n  const stylesheet = [\n    {\n      selector: 'node',\n      style: {\n        'background-color': (ele) => {\n          const type = ele.data('type');\n          if (isPrefix(type)) return COLORS.prefix;\n          return COLORS[type] || COLORS.igp_node;\n        },\n        'label': 'data(label)',\n        'width': 30,\n        'height': 30,\n        'color': COLORS.text,\n        'text-outline-width': 2,\n        'text-outline-color': '#fff',\n        'font-family': 'Consolas',\n        'font-size': '10px',\n        'text-wrap': 'wrap',\n        'text-max-width': '100px'\n      }\n    },\n    {\n      selector: 'edge',\n      style: {\n        'width': 1.5,\n        'line-color': COLORS.edge,\n        'curve-style': 'bezier',\n        'target-arrow-color': COLORS.edge,\n        'target-arrow-shape': 'triangle',\n        'arrow-scale': 0.8\n      }\n    }\n  ];\n\n  return (\n    <div className=\"network-graph\" style={{ width: '100%', height: '800px', position: 'relative' }}>\n      <CytoscapeComponent\n        cy={(cy) => { \n          console.log('Cytoscape initialized');\n          cyRef.current = cy;\n        }}\n        elements={graphData || []}\n        style={{ width: '100%', height: '100%' }}\n        stylesheet={stylesheet}\n        userZoomingEnabled={true}\n        userPanningEnabled={true}\n      />\n      <Legend />\n    </div>\n  );\n};\n\nexport default NetworkGraph; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}