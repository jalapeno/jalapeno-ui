{"ast":null,"code":"var _jsxFileName = \"/Users/brucemcdougall/go/jalapeno-github/jalapeno-ui/src/components/NetworkGraph.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport cytoscape from 'cytoscape';\nimport cola from 'cytoscape-cola';\nimport { apiUrl } from '../config';\nimport '../styles/NetworkGraph.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLORS = {\n  igp_node: '#CC4A04',\n  // Cayenne orange for IGP nodes\n  bgp_node: '#1E88E5',\n  // Blue for BGP nodes\n  prefix: '#002921',\n  // Dark green for all prefix types\n  text: '#000',\n  // Black text\n  edge: '#1a365d' // Blue edges\n};\ncytoscape.use(cola);\nconst NetworkGraph = ({\n  collection\n}) => {\n  _s();\n  const cyRef = useRef(null);\n  const [graphData, setGraphData] = useState(null);\n  const isPrefix = type => {\n    return type === 'ls_prefix' || type === 'bgp_prefix';\n  };\n  useEffect(() => {\n    if (collection !== null && collection !== void 0 && collection.data) {\n      const elements = transformDataToCytoscape(collection.data);\n      setGraphData(elements);\n    }\n  }, [collection]);\n  useEffect(() => {\n    if (cyRef.current && graphData) {\n      const cy = cyRef.current;\n\n      // Run layouts sequentially\n      cy.elements().layout({\n        name: 'circle',\n        animate: false,\n        padding: 50,\n        radius: 150,\n        startAngle: 3 / 2 * Math.PI,\n        sweep: 2 * Math.PI,\n        clockwise: true,\n        nodeDimensionsIncludeLabels: true,\n        // Only include non-prefix nodes\n        nodes: cy.nodes().filter(node => !isPrefix(node.data('type')))\n      }).run();\n\n      // Position prefix nodes in a line\n      const prefixNodes = cy.nodes().filter(node => isPrefix(node.data('type')));\n      const width = cy.width();\n      const height = cy.height();\n      prefixNodes.forEach((node, index) => {\n        const totalPrefixes = prefixNodes.length;\n        const prefixWidth = width * 0.8;\n        const startX = width * 0.1;\n        const x = startX + prefixWidth * index / (totalPrefixes - 1 || 1);\n        node.position({\n          x: x,\n          y: height * 0.8\n        });\n      });\n\n      // Fit the viewport to show all elements\n      cy.fit(undefined, 50);\n    }\n  }, [graphData]);\n  const stylesheet = [{\n    selector: 'node',\n    style: {\n      'background-color': ele => {\n        const type = ele.data('type');\n        if (isPrefix(type)) return COLORS.prefix;\n        return COLORS[type] || COLORS.igp_node;\n      },\n      'label': 'data(label)',\n      'width': 30,\n      'height': 30,\n      'color': COLORS.text,\n      'text-outline-width': 2,\n      'text-outline-color': '#fff',\n      'font-family': 'Consolas',\n      'font-size': '10px',\n      'text-wrap': 'wrap',\n      'text-max-width': '100px'\n    }\n  }, {\n    selector: 'edge',\n    style: {\n      'width': 1.5,\n      'line-color': COLORS.edge,\n      'curve-style': 'bezier',\n      'target-arrow-color': COLORS.edge,\n      'target-arrow-shape': 'triangle',\n      'arrow-scale': 0.8\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"network-graph\",\n    style: {\n      width: '100%',\n      height: '800px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CytoscapeComponent, {\n      cy: cy => {\n        cyRef.current = cy;\n      },\n      elements: graphData || [],\n      style: {\n        width: '100%',\n        height: '100%'\n      },\n      stylesheet: stylesheet,\n      userZoomingEnabled: true,\n      userPanningEnabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n};\n_s(NetworkGraph, \"E/8/QMImdjSaPUsH4myrgcssuf4=\");\n_c = NetworkGraph;\nexport default NetworkGraph;\nvar _c;\n$RefreshReg$(_c, \"NetworkGraph\");","map":{"version":3,"names":["React","useEffect","useRef","useState","CytoscapeComponent","cytoscape","cola","apiUrl","jsxDEV","_jsxDEV","COLORS","igp_node","bgp_node","prefix","text","edge","use","NetworkGraph","collection","_s","cyRef","graphData","setGraphData","isPrefix","type","data","elements","transformDataToCytoscape","current","cy","layout","name","animate","padding","radius","startAngle","Math","PI","sweep","clockwise","nodeDimensionsIncludeLabels","nodes","filter","node","run","prefixNodes","width","height","forEach","index","totalPrefixes","length","prefixWidth","startX","x","position","y","fit","undefined","stylesheet","selector","style","ele","className","children","userZoomingEnabled","userPanningEnabled","fileName","_jsxFileName","lineNumber","columnNumber","Legend","_c","$RefreshReg$"],"sources":["/Users/brucemcdougall/go/jalapeno-github/jalapeno-ui/src/components/NetworkGraph.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport cytoscape from 'cytoscape';\nimport cola from 'cytoscape-cola';\nimport { apiUrl } from '../config';\nimport '../styles/NetworkGraph.css';\n\nconst COLORS = {\n  igp_node: '#CC4A04',    // Cayenne orange for IGP nodes\n  bgp_node: '#1E88E5',    // Blue for BGP nodes\n  prefix: '#002921',      // Dark green for all prefix types\n  text: '#000',           // Black text\n  edge: '#1a365d'         // Blue edges\n};\n\ncytoscape.use(cola);\n\nconst NetworkGraph = ({ collection }) => {\n  const cyRef = useRef(null);\n  const [graphData, setGraphData] = useState(null);\n\n  const isPrefix = (type) => {\n    return type === 'ls_prefix' || type === 'bgp_prefix';\n  };\n\n  useEffect(() => {\n    if (collection?.data) {\n      const elements = transformDataToCytoscape(collection.data);\n      setGraphData(elements);\n    }\n  }, [collection]);\n\n  useEffect(() => {\n    if (cyRef.current && graphData) {\n      const cy = cyRef.current;\n      \n      // Run layouts sequentially\n      cy.elements().layout({\n        name: 'circle',\n        animate: false,\n        padding: 50,\n        radius: 150,\n        startAngle: 3/2 * Math.PI,\n        sweep: 2 * Math.PI,\n        clockwise: true,\n        nodeDimensionsIncludeLabels: true,\n        // Only include non-prefix nodes\n        nodes: cy.nodes().filter(node => !isPrefix(node.data('type')))\n      }).run();\n\n      // Position prefix nodes in a line\n      const prefixNodes = cy.nodes().filter(node => isPrefix(node.data('type')));\n      const width = cy.width();\n      const height = cy.height();\n      \n      prefixNodes.forEach((node, index) => {\n        const totalPrefixes = prefixNodes.length;\n        const prefixWidth = width * 0.8;\n        const startX = width * 0.1;\n        const x = startX + (prefixWidth * index / (totalPrefixes - 1 || 1));\n        \n        node.position({\n          x: x,\n          y: height * 0.8\n        });\n      });\n\n      // Fit the viewport to show all elements\n      cy.fit(undefined, 50);\n    }\n  }, [graphData]);\n\n  const stylesheet = [\n    {\n      selector: 'node',\n      style: {\n        'background-color': (ele) => {\n          const type = ele.data('type');\n          if (isPrefix(type)) return COLORS.prefix;\n          return COLORS[type] || COLORS.igp_node;\n        },\n        'label': 'data(label)',\n        'width': 30,\n        'height': 30,\n        'color': COLORS.text,\n        'text-outline-width': 2,\n        'text-outline-color': '#fff',\n        'font-family': 'Consolas',\n        'font-size': '10px',\n        'text-wrap': 'wrap',\n        'text-max-width': '100px'\n      }\n    },\n    {\n      selector: 'edge',\n      style: {\n        'width': 1.5,\n        'line-color': COLORS.edge,\n        'curve-style': 'bezier',\n        'target-arrow-color': COLORS.edge,\n        'target-arrow-shape': 'triangle',\n        'arrow-scale': 0.8\n      }\n    }\n  ];\n\n  return (\n    <div className=\"network-graph\" style={{ width: '100%', height: '800px' }}>\n      <CytoscapeComponent\n        cy={(cy) => { cyRef.current = cy; }}\n        elements={graphData || []}\n        style={{ width: '100%', height: '100%' }}\n        stylesheet={stylesheet}\n        userZoomingEnabled={true}\n        userPanningEnabled={true}\n      />\n      <Legend />\n    </div>\n  );\n};\n\nexport default NetworkGraph; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}